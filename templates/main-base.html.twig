{% extends 'base.html.twig' %}

{% block title %}Main template{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    {{ encore_entry_link_tags('sidebar') }}
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    {{ encore_entry_script_tags('sidebar') }}
{% endblock %}

{% block body %}
    <div class="d-flex h-100">
        <div>
            {% block sidebar %}
                <div class="d-flex flex-column flex-shrink-0 p-3 text-white bg-blue main-sidebar">
                    <div>
                        <a href="{{ path('homepage') }}"
                           class="d-flex justify-content-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
                            <span class="fs-4">{% trans from 'sidebar' %}title{% endtrans %}</span>
                        </a>
                    </div>
                    <hr>
                    <ul class="nav nav-pills flex-column mb-auto">
                        {% if is_granted('ROLE_ADMIN') %}
                            {{ component('sidebar-module', {path: 'user', src: 'users-256.png', trans: 'module.users'}) }}
                        {% endif %}
                        {{ component('sidebar-module', {path: 'product', src: 'product-256.png', trans: 'module.products'}) }}
                    </ul>
                    <div class="d-flex align-self-center">
                        {% if is_granted('ROLE_ADMIN') %}
                            {% trans from 'sidebar' %}admin{% endtrans %}
                        {% else %}
                            {{ app.user.getFullName() }}
                        {% endif %}
                    </div>
                    <hr>
                    <div class="d-flex justify-content-around main-sidebar-footer">
                        <a class="border border-white rounded-circle p-2 d-flex justify-content-center"
                           data-mdb-toggle="tooltip" title="{% trans from 'sidebar' %}footer.logout{% endtrans %}"
                           href="/logout">
                            <img width="22" height="22" src="{{ asset('build/images/logout-256.png') }}"
                                 alt="{% trans from 'sidebar' %}footer.logout{% endtrans %}">
                        </a>
                        <div class="d-flex justify-content-center">
                            {{ component('language-switcher', { type: 'up' }) }}
                        </div>
                    </div>
                </div>
            {% endblock %}
        </div>
        <div class="container mt-3">
            {% if error is defined and error %}
                <div class="alert alert-danger">{{ error|trans({}, 'security') }}</div>
            {% endif %}
            <div>
                {% block innerbody %}{% endblock %}
            </div>
        </div>
    </div>
{% endblock %}
